{
    "format_version": "1.21.50",
    "minecraft:entity": {
        "description": {
            "identifier": "gm1_ord:ring",
            "is_summonable": true,
            "is_spawnable": true,
            "properties": {
                "gm1_ord:give_amount": { "type": "int", "range": [ 1, 65 ], "default": 1 },
                "gm1_ord:tried_collect": { "type": "bool", "default": false },
                "gm1_ord:is_collected": { "type": "bool", "default": false, "client_sync": true },
                "gm1_ord:is_dropped_ring": { "type": "bool", "default": false, "client_sync": true }
            }
        },
        "component_groups": {
            "gm1_ord:instant_despawn": { "minecraft:instant_despawn": {}},
            "gm1_ord:ring_collectable": {
                "minecraft:entity_sensor": {
                    "subsensors": [
                        {
                            "range": "^o.ring.pickup_range.default",
                            "cooldown": 0,
                            "event_filters": {
                                "all_of": [
                                    { "test": "is_family", "value": "player", "subject": "other" },
                                    {
                                        "test": "bool_property",
                                        "domain": "gm1_ord:tried_collect",
                                        "operator": "equals",
                                        "value": false,
                                        "subject": "self"
                                    },
                                    {
                                        "test": "has_tag",
                                        "domain": "torso",
                                        "value": "gm1_ord:transform_chestplate",
                                        "operator": "!=",
                                        "subject": "other"
                                    },
                                    {
                                        "test": "has_equipment",
                                        "domain": "leg",
                                        "value": "gm1_ord:transform_leggings",
                                        "operator": "!=",
                                        "subject": "other"
                                    },
                                    {
                                        "test": "has_equipment",
                                        "domain": "feet",
                                        "value": "gm1_ord:transform_boots",
                                        "operator": "!=",
                                        "subject": "other"
                                    }
                                ]
                            },
                            "event": "gm1_ord:ring_try_collect"
                        },
                        {
                            "range": "^o.ring.pickup_range.character",
                            "cooldown": 0,
                            "event_filters": {
                                "all_of": [
                                    { "test": "is_family", "value": "player", "subject": "other" },
                                    {
                                        "test": "bool_property",
                                        "domain": "gm1_ord:tried_collect",
                                        "operator": "equals",
                                        "value": false,
                                        "subject": "self"
                                    },
                                    {
                                        "test": "has_equipment",
                                        "domain": "torso",
                                        "value": "gm1_ord:transform_chestplate",
                                        "operator": "==",
                                        "subject": "other"
                                    },
                                    {
                                        "test": "has_equipment",
                                        "domain": "leg",
                                        "value": "gm1_ord:transform_leggings",
                                        "operator": "==",
                                        "subject": "other"
                                    },
                                    {
                                        "test": "has_equipment",
                                        "domain": "feet",
                                        "value": "gm1_ord:transform_boots",
                                        "operator": "==",
                                        "subject": "other"
                                    }
                                ]
                            },
                            "event": "gm1_ord:ring_try_collect"
                        }
                    ]
                },
                "minecraft:physics": { "has_collision": true, "has_gravity": false }
            },
            "gm1_ord:ring_collected": {
                "minecraft:timer": { "time_down_event": { "event": "gm1_ord:instant_despawn" }, "time": [ 0.1, 0.1 ]}
            },
            "gm1_ord:dropped_ring": {
                "minecraft:timer": {
                    "time_down_event": { "event": "gm1_ord:dropped_to_ring_collectable" },
                    "looping": false,
                    "time": 0.5
                },
                "minecraft:despawn": {
                    "filters": { "all_of": [{ "test": "distance_to_nearest_player", "value": 40, "operator": ">=" }]}
                },
                "minecraft:physics": { "has_collision": true, "has_gravity": true }
            },
            "gm1_ord:dropped_to_ring_collectable": {
                "minecraft:timer": {
                    "time_down_event": { "event": "gm1_ord:instant_despawn" },
                    "looping": false,
                    "time": 8.75
                }
            }
        },
        "components": {
            "minecraft:collision_box": { "width": 0, "height": 0 },
            "minecraft:custom_hit_test": { "hitboxes": [{ "width": 1, "height": 1, "pivot": [ 0, 0.5, 0 ]}]},
            "minecraft:physics": { "has_collision": true, "has_gravity": false },
            "minecraft:health": { "value": 999 },
            "minecraft:damage_sensor": { "triggers": [{ "cause": "all", "deals_damage": "no" }]},
            "minecraft:pushable": { "is_pushable": false, "is_pushable_by_piston": false },
            "minecraft:water_movement": { "drag_factor": 0 },
            "minecraft:nameable": { "allow_name_tag_renaming": false, "always_show": true },
            "minecraft:mob_effect_immunity": {
                "mob_effects": [
                    "absorption",
                    "bad_omen",
                    "blindness",
                    "conduit_power",
                    "darkness",
                    "fatal_poison",
                    "fire_resistance",
                    "haste",
                    "health_boost",
                    "hunger",
                    "infested",
                    "instant_damage",
                    "instant_health",
                    "invisibility",
                    "jump_boost",
                    "levitation",
                    "mining_fatigue",
                    "nausea",
                    "night_vision",
                    "oozing",
                    "poison",
                    "raid_omen",
                    "regeneration",
                    "resistance",
                    "saturation",
                    "slow_falling",
                    "slowness",
                    "speed",
                    "strength",
                    "trial_omen",
                    "village_hero",
                    "water_breathing",
                    "weakness",
                    "weaving",
                    "wind_charged",
                    "wither"
                ]
            }
        },
        "events": {
            "minecraft:entity_spawned": {
                "filters": [
                    { "test": "has_component", "subject": "self", "operator": "!=", "value": "gm1_ord:dropped_ring" }
                ],
                "trigger": "gm1_ord:ring_collectable"
            },
            "gm1_ord:instant_despawn": { "add": { "component_groups": [ "gm1_ord:instant_despawn" ]}},
            "gm1_ord:ring_collectable": {
                "add": { "component_groups": [ "gm1_ord:ring_collectable" ]},
                "set_property": { "gm1_ord:is_dropped_ring": false }
            },
            "gm1_ord:ring_try_collect": { "set_property": { "gm1_ord:tried_collect": true }},
            "gm1_ord:ring_reject_collect": { "set_property": { "gm1_ord:tried_collect": false }},
            "gm1_ord:ring_collected": {
                "add": { "component_groups": [ "gm1_ord:ring_collected" ]},
                "remove": { "component_groups": [ "gm1_ord:ring_collectable" ]},
                "set_property": { "gm1_ord:is_collected": true }
            },
            "gm1_ord:dropped_ring": {
                "add": { "component_groups": [ "gm1_ord:dropped_ring" ]},
                "set_property": { "gm1_ord:is_dropped_ring": true }
            },
            "gm1_ord:dropped_to_ring_collectable": {
                "add": { "component_groups": [ "gm1_ord:ring_collectable", "gm1_ord:dropped_to_ring_collectable" ]}
            }
        }
    }
}